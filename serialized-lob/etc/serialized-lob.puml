@startuml
package com.iluwatar.serialized.lob {
  class App {
    - DB_URL : String {static}
    - LOGGER : Logger {static}
    + App()
    - createDataSource() : DataSource {static}
    - createSchema(dataSource : DataSource) {static}
    - deleteSchema(dataSource : DataSource) {static}
    + main(args : String[]) {static}
  }
  class Position {
    - id : int
    - name : String
    - departments : List<Department>
    ~ Position(id : int, name : String, departments : List<Department>)
  }
  class Department {
    - name : String
    - subsidiaries : List<Department>
    ~ Department(name : String, subsidiaries : List<Department>)
  }
  class Serialization {
    - CREATE_SCHEMA_SQL : String {static}
    - DELETE_SCHEMA_SQL : String {static}
    - LOGGER : Logger {static}
    - dataSource : DataSource
    - position : Position
    ~ Serialization(position : Position, dataSource : DataSource)
    + insert()
    + read()
    + update(updatePosition : Position)
    + delete()
  }

  object devDept {
    - name : "Development Department"
    - subsidiaries : []
  }
  object testDept {
    - name : "Testing Department"
    - subsidiaries : []
  }
  object devManageDept {
    - name : "Development Management Department"
    - subsidiaries : [Development Department]
  }
  object testManageDept {
    - name : "Testing Management Department"
    - subsidiaries : [Testing Department]
  }
  object engineeringManageDept {
    - name : "Engineering Management Department"
    - subsidiaries : [Development Management Department, Testing Management Department]
  }
  object CTO {
      - id : 1
      - name : "CTO"
      - departments : [engineeringManageDept]
  }
  diamond database
}

App --> "Initialize departments" Department
Department <--> engineeringManageDept
Department --> "Initialize position with departments" Position

devDept --> devManageDept
testDept --> testManageDept
devManageDept --> engineeringManageDept
testManageDept --> engineeringManageDept

engineeringManageDept --> CTO
Position <--> CTO
CTO --> "Stored in database" database
Position --> Serialization
Serialization --> "Performe CRUD operations" database

@enduml